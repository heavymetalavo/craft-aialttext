{% extends "_layouts/cp.twig" %}
{% set title = "AI Alt Text"|t('aialttext') %}

{% block content %}
    <h2>Instructions</h2>

    <p>Lots of info in <a target="_blank" href="https://github.com/heavymetalavo/craft-aialttext">the plugin docs</a>, but in short;
    <ol>
        <li>Check the plugin settings are suitable for your project</li>
        <li>Go to the <strong>Assets</strong> section in the Control Panel to view the table of assets</li>
        <li>Select the checkboxes of all the assets you want to generate alt text for</li>
        <li>Click the cog icon to reveal the Element actions and select <strong>Generate AI Alt Text</strong></li>
        <li>The plugin will queue jobs to generate alt text for each selected asset</li>
    </ol>

    <h2>Bulk actions</h2>

    <p>Generate alt text for all assets</p>

    <table class="data fullwidth">
        <thead>
            <tr>
                <th>Site</th>
                <th>Total Assets</th>
                <th>With Alt Text</th>
                <th>Without Alt Text</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% if sites|length > 1 %}
                <tr class="totalcount">
                    <td><strong>All Sites Total</strong></td>
                    <td>{{ totalAssetsWithAltTextForAllSites + totalAssetsWithoutAltTextForAllSites }}</td>
                    <td>{{ totalAssetsWithAltTextForAllSites }}</td>
                    <td>{{ totalAssetsWithoutAltTextForAllSites }}</td>
                    <td>
                        <div class="buttons">
                            <a href="{{ actionUrl('ai-alt-text/generate/generate-all-assets') }}" class="btn small submit">Generate all</a>
                            <a href="{{ actionUrl('ai-alt-text/generate/generate-assets-without-alt-text') }}" class="btn small submit">Generate missing</a>
                        </div>
                    </td>
                </tr>
                {% for site in sites %}
                <tr>
                    <td>{{ site.name }}</td>
                    <td>{{ siteAltTextCounts[site.id].total }}</td>
                    <td>{{ siteAltTextCounts[site.id].with }}</td>
                    <td>{{ siteAltTextCounts[site.id].without }}</td>
                    <td>
                        <div class="buttons">
                            <a href="{{ actionUrl('ai-alt-text/generate/generate-all-assets', {siteId: site.id}) }}" class="btn small submit">Generate all</a>
                            <a href="{{ actionUrl('ai-alt-text/generate/generate-assets-without-alt-text', {siteId: site.id}) }}" class="btn small submit">Generate missing</a>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            {% endif %}
        </tbody>
    </table> 

{% endblock %}